import React from 'react';
import { connect } from 'react-redux';

import { Loading } from "loading/Loading";
import ConnectDialog from "logobar/connectionstatus/connectdialog/ConnectDialog";
import { openConnectDialog } from "logobar/connectionstatus/connectdialog/actions";
import "logobar/connectionstatus/ConnectionStatus.css";

const ConnectionStatus = ({connecting,  connected, openConnectDialog}) => (
    <>
        <div className="connection-status">{
            connecting ?
                <>Connecting <Loading color="white" /></>
            :
                (!connected ?
                    <>
                        You are not connected to home
                        <button type="button" className="btn btn-success" onClick={openConnectDialog}>Connect</button>
                    </>
                :
                    <>
                        You are connected to home
                        <button type="button" className="btn btn-outline-primary">Disconnect</button>
                    </>
            )
        }</div>
        <ConnectDialog />
    </>
);

export default connect(
    (state) => ({
        connecting: state.home.connecting,
        connected: !!state.home.token
    }),
    { openConnectDialog }
)(ConnectionStatus);
