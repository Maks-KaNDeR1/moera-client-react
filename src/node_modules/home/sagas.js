import { call } from 'redux-saga/effects';

import { HomeError } from "error";
import { callApi } from "node/sagas";
import * as NodeApi from "node/api";

function* callHome(options) {
    return yield call(callApi, {
        ...options,
        rootApiSelector: state => state.home.root.api,
        onException: e => {throw new HomeError(e)}
    });
}

export function* getWhoAmI() {
    return yield call(callHome, {location: "/whoami", schema: NodeApi.WhoAmI});
}
