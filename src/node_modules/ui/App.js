import React from 'react';
import { connect } from 'react-redux';

import Storage from "ui/storage/Storage";
import Navigation from "ui/navigation/Navigation";
import ErrorPane from "ui/error/ErrorPane";
import LogoBar from "ui/logobar/LogoBar";
import MainMenu from "ui/mainmenu/MainMenu";
import { isAtIndexPage, isAtProfilePage } from "state/navigation/selectors";
import TimelinePage from "ui/timeline/TimelinePage";
import ProfilePage from "ui/profile/ProfilePage";
import MessageBox from "ui/messagebox/MessageBox";
import "./App.css";

const Content = ({atIndexPage, atProfilePage}) => (
    <>
        {atIndexPage && <TimelinePage />}
        {atProfilePage && <ProfilePage />}
    </>
);

const App = (props) => (
    <>
        <Storage />
        <Navigation />
        <ErrorPane />
        <LogoBar />
        <MainMenu />
        <Content {...props} />
        <MessageBox />
    </>
);

export default connect(
    (state) => ({
        atIndexPage: isAtIndexPage(state),
        atProfilePage: isAtProfilePage(state)
    })
)(App);
