import React from 'react';
import { connect } from 'react-redux';

import Storage from "ui/storage/Storage";
import Navigation from "ui/navigation/Navigation";
import ErrorPane from "ui/error/ErrorPane";
import MainMenu from "ui/mainmenu/MainMenu";
import { isAtComposePage, isAtPostingPage, isAtProfilePage, isAtTimelinePage } from "state/navigation/selectors";
import TimelinePage from "ui/timeline/TimelinePage";
import ProfilePage from "ui/profile/ProfilePage";
import PostingPage from "ui/posting/PostingPage";
import ComposePage from "ui/compose/ComposePage";
import MessageBox from "ui/messagebox/MessageBox";
import "./App.css";

const ContentImpl = ({atTimelinePage, atProfilePage, atPostingPage, atComposePage}) => (
    <>
        {atTimelinePage && <TimelinePage />}
        {atProfilePage && <ProfilePage />}
        {atPostingPage && <PostingPage />}
        {atComposePage && <ComposePage />}
    </>
);

const Content = connect(
    state => ({
        atTimelinePage: isAtTimelinePage(state),
        atProfilePage: isAtProfilePage(state),
        atPostingPage: isAtPostingPage(state),
        atComposePage: isAtComposePage(state)
    })
)(ContentImpl);

const App = () => (
    <>
        <Storage />
        <Navigation />
        <ErrorPane />
        <MainMenu />
        <Content />
        <MessageBox />
    </>
);

export default App;
