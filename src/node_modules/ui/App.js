import React from 'react';
import { connect } from 'react-redux';

import Storage from "ui/storage/Storage";
import Navigation from "ui/navigation/Navigation";
import ErrorPane from "ui/error/ErrorPane";
import LogoBar from "ui/logobar/LogoBar";
import MainMenu from "ui/mainmenu/MainMenu";
import { isAtProfilePage, isAtTimelinePage } from "state/navigation/selectors";
import TimelinePage from "ui/timeline/TimelinePage";
import ProfilePage from "ui/profile/ProfilePage";
import MessageBox from "ui/messagebox/MessageBox";
import "./App.css";

const ContentImpl = ({atTimelinePage, atProfilePage}) => (
    <>
        {atTimelinePage && <TimelinePage />}
        {atProfilePage && <ProfilePage />}
    </>
);

const Content = connect(
    state => ({
        atTimelinePage: isAtTimelinePage(state),
        atProfilePage: isAtProfilePage(state)
    })
)(ContentImpl);

const App = () => (
    <>
        <Storage />
        <Navigation />
        <ErrorPane />
        <LogoBar />
        <MainMenu />
        <Content />
        <MessageBox />
    </>
);

export default App;
