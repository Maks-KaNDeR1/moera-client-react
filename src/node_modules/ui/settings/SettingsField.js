import React from 'react';

import { CheckboxField, DurationField, InputField, NumberField } from "ui/control";
import { parseBool } from "util/util";

function deserializeBool(value) {
    return value != null ? parseBool(value) : null;
}

function deserializeInt(value) {
    return value != null ? parseInt(value) : null;
}

const SettingsField = ({name, fieldName, meta, initialValue}) => {
    const type = meta ? meta.type : "string";
    const title = meta ? meta.title : name;
    switch (type) {
        case "bool":
            return <CheckboxField name={fieldName} title={title} single={true}
                                  initialValue={deserializeBool(initialValue)}
                                  defaultValue={deserializeBool(meta.defaultValue)}/>;

        case "int":
            return <NumberField name={fieldName} title={title}
                                min={deserializeInt(meta.modifiers.min)}
                                max={deserializeInt(meta.modifiers.max)}
                                initialValue={deserializeInt(initialValue)}
                                defaultValue={deserializeInt(meta.defaultValue)}/>;

        case "Duration":
            return <DurationField name={fieldName} title={title} min={meta.modifiers.min} max={meta.modifiers.max}
                                  initialValue={initialValue} defaultValue={meta.defaultValue}/>;

        default:
            return <InputField name={fieldName} title={title}
                               initialValue={initialValue} defaultValue={meta ? meta.defaultValue : null} anyValue/>;
    }
};

export default SettingsField;
