import React from 'react';
import { connect } from 'react-redux';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';

import { getPostingVerificationStatus } from "state/postings/selectors";
import { postingVerify } from "state/postings/actions";
import "./PostingVerifyButton.css";

const PostingVerifyButton = ({id, getStatus, postingVerify}) => {
    switch (getStatus(id)) {
        default:
        case "none":
            return (
                <span className="posting-verify" title="Verify signature" onClick={() => postingVerify(id)}>
                    <FontAwesomeIcon icon={["far", "user"]} size="sm"/>
                </span>
            );
        case "running":
            return (
                <span className="posting-verify-running" title="Signature verification in process">
                    <FontAwesomeIcon icon="user-clock" size="sm"/>
                </span>
            );
        case "correct":
            return (
                <span className="posting-verify-correct" title="Signature is correct">
                    <FontAwesomeIcon icon="user-check" size="sm"/>
                </span>
            );
        case "incorrect":
            return (
                <span className="posting-verify-incorrect" title="Signature is incorrect">
                    <FontAwesomeIcon icon="user-times" size="sm"/>
                </span>
            );
    }
};

export default connect(
    state => ({
        getStatus: id => getPostingVerificationStatus(state, id)
    }),
    { postingVerify }
)(PostingVerifyButton);
