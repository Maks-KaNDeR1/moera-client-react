import React from 'react';
import { connect } from 'react-redux';
import selectn from 'selectn';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';

import { Page } from "ui/page/Page";
import { Loading } from "ui/control";
import { DetailedPosting } from "ui/posting/DetailedPosting";
import "./PostingPage.css";

const PostingPage = ({id, loading, postings}) => {
    const posting = selectn([id, "posting"], postings);
    return (
        <Page>
            {posting && <DetailedPosting posting={posting} />}
            {!posting && loading &&
                <div className="posting">
                    <Loading active={loading} />
                </div>
            }
            {!posting && !loading &&
                <div className="posting-not-found">
                    <FontAwesomeIcon className="icon" icon="frown" size="3x" />
                    <div className="message">Posting not found or cannot be displayed.</div>
                </div>
            }
        </Page>
    );
};

export default connect(
    state => ({
        id: state.posting.id,
        loading: state.posting.loading,
        postings: state.postings
    })
)(PostingPage);
