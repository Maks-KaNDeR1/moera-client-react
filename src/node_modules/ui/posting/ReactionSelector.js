import React from 'react';
import { connect } from 'react-redux';
import cx from 'classnames';

import { REACTION_EMOJIS } from "api";
import { Twemoji } from "ui/control";
import { postingReact } from "state/postings/actions";
import "./ReactionSelector.css";

const ReactionChoiceImpl = ({id, negative, emoji, invisible, postingReact}) => {
    const re = !negative ? REACTION_EMOJIS.positive[emoji] : REACTION_EMOJIS.negative[emoji];
    return (
        <div className={cx("choice", {invisible})} onClick={e => postingReact(id, negative, emoji)}>
            <Twemoji key={emoji} code={emoji} title={re ? re.title : ""}/>
        </div>
    );
};

const ReactionChoice = connect(
    null,
    { postingReact }
)(ReactionChoiceImpl);

const ReactionSelector = ({id, negative, reactions}) => {
    return (
        <div className="reaction-selector">
            {reactions.map(({emoji, invisible}) =>
                <ReactionChoice key={emoji} id={id} negative={negative} emoji={emoji} invisible={invisible}/>
            )}
        </div>
    );
};

export default ReactionSelector;
