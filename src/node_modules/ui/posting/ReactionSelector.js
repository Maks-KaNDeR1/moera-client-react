import React from 'react';
import { connect } from 'react-redux';

import { REACTION_EMOJIS } from "api";
import { Twemoji } from "ui/control";
import { postingReact } from "state/postings/actions";
import { MAIN_NEGATIVE_REACTIONS, MAIN_POSITIVE_REACTIONS } from "api/node/reaction-emojis";
import "./ReactionSelector.css";

const ReactionChoiceImpl = ({id, negative, emoji, postingReact}) => {
    const re = !negative ? REACTION_EMOJIS.positive[emoji] : REACTION_EMOJIS.negative[emoji];
    return (
        <div className="choice" onClick={e => postingReact(id, negative, emoji)}>
            <Twemoji key={emoji} code={emoji} title={re ? re.title : ""}/>
        </div>
    );
};

const ReactionChoice = connect(
    null,
    { postingReact }
)(ReactionChoiceImpl);

const ReactionSelector = ({id, negative}) => {
    const reactions = !negative ? MAIN_POSITIVE_REACTIONS : MAIN_NEGATIVE_REACTIONS;
    return (
        <div className="reaction-selector">
            {reactions.map(emoji => <ReactionChoice key={emoji} id={id} negative={negative} emoji={emoji}/>)}
        </div>
    );
};

export default ReactionSelector;
