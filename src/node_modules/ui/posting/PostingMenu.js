import React from 'react';
import { connect } from 'react-redux';

import { DropdownMenu } from "ui/control";
import { goToCompose } from "state/navigation/actions";
import "./PostingMenu.css";

const PostingMenu = ({posting, isPermitted, rootLocation, goToCompose}) => (
    <DropdownMenu items={[
        {
            title: "Edit...",
            href: `${rootLocation}/moera/compose?id=${posting.id}`,
            onClick: () => goToCompose(posting.id),
            show: isPermitted("edit", posting)
        },
        {
            title: "Delete",
            href: "#",
            onClick: null,
            show: isPermitted("delete", posting)
        }
    ]}/>
);

export default connect(
    state => ({
        rootLocation: state.node.root.location,
    }),
    {goToCompose}
)(PostingMenu);
