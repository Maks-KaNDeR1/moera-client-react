import React from 'react';
import { connect } from 'react-redux';
import * as moment from 'moment';
import cx from 'classnames';

import "./OperationStatus.css";

const OperationStatus = ({status, statusUpdated, errorCode, errorMessage}) => {
    let text;
    switch (status) {
        case "waiting":
            text = "Operation is waiting";
            break;
        case "added":
            text = "Operation has been added";
            break;
        case "started":
            text = "Operation has been started";
            break;
        case "succeeded":
            text = "Operation succeeded";
            break;
        case "failed":
            text = "Operation failed";
            break;
        case "unknown":
            text = "Operation status is unknown";
            break;
        default:
            return null;
    }
    const dateTime = moment.unix(statusUpdated).format("DD-MM-YYYY HH:mm:ss");
    return (
        <span className={cx([
            "naming-operation-status", {
                "success": status === "succeeded",
                "failure": status === "failed"
            }
            ])}>{text} at {dateTime}</span>
    );
};

export default connect(
    state => ({
        status: state.registeredName.operationStatus,
        statusUpdated: state.registeredName.operationStatusUpdated,
        errorCode: state.registeredName.operationErrorCode,
        errorMessage: state.registeredName.operationErrorMessage,
    })
)(OperationStatus);
