import React from 'react';
import { connect } from 'react-redux';
import moment from 'moment';
import { DateTimePicker } from 'react-widgets';

import { getTimelineAtTimestamp } from "state/timeline/selectors";
import { goToTimeline } from "state/navigation/actions";
import "./TimelinePageHeader.css";

const TimelinePageHeader = ({empty = false, timestamp, goToTimeline}) => (
    <div id="timeline-header">
        <h2>Timeline</h2>
        {empty || <div id="timeline-calendar-btn">
            <DateTimePicker format="dd-MM-yyyy" value={moment.unix(timestamp).toDate()} time={false}
                            onChange={value => goToTimeline(moment(value).endOf('day').unix() * 100)} />
        </div>}
    </div>
);

export default connect(
    state => ({
        timestamp: getTimelineAtTimestamp(state)
    }),
    { goToTimeline }
)(TimelinePageHeader);
