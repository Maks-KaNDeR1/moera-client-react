import React from 'react';
import { connect } from 'react-redux';
import cx from 'classnames';

import { goToTimeline } from "state/navigation/actions";
import { isAtPostingPage, isAtTimelinePage } from "state/navigation/selectors";

const MainMenuTimelineLink = ({rootLocation, active, anchor, goToTimeline}) => {
    const href = anchor != null ? `${rootLocation}/timeline?before=${anchor}` : rootLocation + "/timeline";
    return (
        <li className={cx(["nav-item", {"active": active}])}>
            <a className="nav-link" href={href}
               onClick={event => {
                   goToTimeline(active ? Number.MAX_SAFE_INTEGER : anchor);
                   event.preventDefault();
               }}>
                TIMELINE
            </a>
        </li>
    );
};

export default connect(
    state => ({
        rootLocation: state.node.root.location,
        active: isAtTimelinePage(state) || isAtPostingPage(state),
        anchor: state.timeline.anchor
    }),
    { goToTimeline }
)(MainMenuTimelineLink);
