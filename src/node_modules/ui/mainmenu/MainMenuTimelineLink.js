import React from 'react';
import { connect } from 'react-redux';
import cx from 'classnames';

import { goToTimeline } from "state/navigation/actions";
import { isAtPostingPage, isAtTimelinePage } from "state/navigation/selectors";

const MainMenuTimelineLink = ({rootLocation, active, at, goToTimeline}) => {
    return (
        <li className={cx(["nav-item", {"active": active}])}>
            <a className="nav-link" href={`${rootLocation}/timeline?before=${at}`}
               onClick={event => {
                   goToTimeline(active ? Number.MAX_SAFE_INTEGER : at);
                   event.preventDefault();
               }}>
                TIMELINE
            </a>
        </li>
    );
};

export default connect(
    state => ({
        rootLocation: state.node.root.location,
        active: isAtTimelinePage(state) || isAtPostingPage(state),
        at: state.timeline.at
    }),
    { goToTimeline }
)(MainMenuTimelineLink);
