import { trigger } from "state/trigger";
import { CONNECTED_TO_HOME, DISCONNECT_FROM_HOME } from "state/home/actions";
import {
    PROFILE_EDIT,
    PROFILE_EDIT_CANCEL,
    PROFILE_UPDATE_SUCCEEDED,
    profileLoad,
    profileUnset
} from "state/profile/actions";
import { isProfileToBeLoaded } from "state/profile/selectors";
import { GO_TO_PAGE, updateLocation } from "state/navigation/actions";
import { isAtProfilePage } from "state/navigation/selectors";

export default [
    trigger(GO_TO_PAGE, state => isAtProfilePage(state) && isProfileToBeLoaded(state), profileLoad),
    trigger([CONNECTED_TO_HOME, DISCONNECT_FROM_HOME], isAtProfilePage, profileLoad),
    trigger([CONNECTED_TO_HOME, DISCONNECT_FROM_HOME], state => !isAtProfilePage(state), profileUnset),
    trigger([PROFILE_EDIT, PROFILE_EDIT_CANCEL, PROFILE_UPDATE_SUCCEEDED], isAtProfilePage, updateLocation)
];
