import { conj, trigger } from "state/trigger";
import { CONNECTED_TO_HOME, DISCONNECT_FROM_HOME } from "state/home/actions";
import { GO_TO_PAGE, scrollLocation } from "state/navigation/actions";
import { isAtDetailedPostingPage } from "state/navigation/selectors";
import { DETAILED_POSTING_LOADED, detailedPostingLoad } from "state/detailedposting/actions";
import { isDetailedPostingToBeLoaded } from "state/detailedposting/selectors";
import { postingSet } from "state/postings/actions";

export default [
    trigger(GO_TO_PAGE, conj(isAtDetailedPostingPage, isDetailedPostingToBeLoaded), detailedPostingLoad),
    trigger([CONNECTED_TO_HOME, DISCONNECT_FROM_HOME], isAtDetailedPostingPage, detailedPostingLoad),
    trigger(DETAILED_POSTING_LOADED, true, signal => postingSet(signal.payload.posting)),
    trigger(DETAILED_POSTING_LOADED, isAtDetailedPostingPage, scrollLocation),
];
