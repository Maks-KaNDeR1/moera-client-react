import { conj, inv, trigger } from "state/trigger";
import { CONNECTED_TO_HOME, DISCONNECT_FROM_HOME } from "state/home/actions";
import { GO_TO_PAGE } from "state/navigation/actions";
import { isAtProfilePage } from "state/navigation/selectors";
import { isRegisteredNameOperationPending, isRegisteredNameToBeLoaded } from "state/registeredname/selectors";
import { REGISTER_NAME_SUCCEEDED, registeredNameLoad, registeredNameUnset } from "state/registeredname/actions";
import { PULSE_10MIN, PULSE_1MIN } from "state/pulse/actions";

export default [
    trigger(GO_TO_PAGE, conj(isAtProfilePage, isRegisteredNameToBeLoaded), registeredNameLoad),
    trigger([CONNECTED_TO_HOME, DISCONNECT_FROM_HOME], isAtProfilePage, registeredNameLoad),
    trigger([CONNECTED_TO_HOME, DISCONNECT_FROM_HOME], inv(isAtProfilePage), registeredNameUnset),
    trigger(REGISTER_NAME_SUCCEEDED, true, registeredNameLoad),
    trigger(PULSE_1MIN, isRegisteredNameOperationPending, registeredNameLoad),
    trigger(PULSE_10MIN, conj(inv(isRegisteredNameOperationPending), isAtProfilePage), registeredNameLoad),
    trigger(PULSE_10MIN, conj(inv(isRegisteredNameOperationPending), inv(isAtProfilePage)), registeredNameUnset),
];
