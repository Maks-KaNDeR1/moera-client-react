import { put, delay } from 'redux-saga/effects';

import { NodeApiError } from "api";
import { errorDismiss, errorShow } from "state/error/actions";

export function* errorSaga(action) {
    if (action.payload.e instanceof NodeApiError) {
        return;
    }

    const {message, messageVerbose} = action.payload.e;
    yield put(errorShow(message, messageVerbose));
    yield delay(3000);
    yield put(errorDismiss());
}
