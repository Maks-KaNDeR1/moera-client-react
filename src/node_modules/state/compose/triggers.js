import { conj, trigger } from "state/trigger";
import { COMPOSE_POST_SUCCEEDED, composeFeaturesLoad, composePostingLoad } from "state/compose/actions";
import { GO_TO_PAGE, goToPosting } from "state/navigation/actions";
import { postingSet } from "state/posting/actions";
import { isAtComposePage } from "state/navigation/selectors";
import { isComposeFeaturesToBeLoaded, isComposePostingToBeLoaded } from "state/compose/selectors";

export default [
    trigger(GO_TO_PAGE, conj(isAtComposePage, isComposeFeaturesToBeLoaded), composeFeaturesLoad),
    trigger(GO_TO_PAGE, conj(isAtComposePage, isComposePostingToBeLoaded), composePostingLoad),
    trigger(COMPOSE_POST_SUCCEEDED, true, signal => goToPosting(signal.payload.posting.id)),
    trigger(COMPOSE_POST_SUCCEEDED, true, signal => postingSet(signal.payload.posting))
];
