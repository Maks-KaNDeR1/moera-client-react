import { GO_TO_PAGE, UPDATE_LOCATION } from "state/navigation/actions";
import LocationInfo from "ui/navigation/LocationInfo";

const initialState = {
    page: "index",
    location: ""
};

function buildLocation(state) {
    let info = new LocationInfo();
    if (state.page === "index") {
        return info;
    } else if (state.page === "profile") {
        return info.sub("profile");
    }
    return info;
}

export default (state = initialState, action) => {
    switch (action.type) {
        case GO_TO_PAGE:
            return {
                ...state,
                page: action.payload.page
            };

        case UPDATE_LOCATION:
            return {
                ...state,
                location: buildLocation(state).toUrl()
            };

        default:
            return state;
    }
}
